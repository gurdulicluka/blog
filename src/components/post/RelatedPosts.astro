---
import { CollectionEntry } from "astro:content";
import ArticleCard from "../ArticleCard.astro";

interface Props {
  posts: CollectionEntry<"blog">[];
  title: String;
  category: String;
}
const { posts, category, title } = Astro.props;

const relatedPosts = posts
  .filter(
    (post) =>
      post.data.category.toLowerCase() === category.toLowerCase() &&
      post.data.title !== title
  )
  .slice(0, 4);
---

<!-- FIXME nothing shows when some post doesn't have anything related, put something to be a placeholder instead in those scenarios -->
<section
  class="bg-base-300 pt-[140px] pb-[60px] pattern border-t-4 border-base-200"
>
  <div class="2xl:container sm:px-8 px-4 py-8 z-10 rounded-xl">
    <h2 class="font-bold text-2xl sm:text-4xl mb-4 sm:mb-6">Related posts</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6">
      {
        relatedPosts.map((post) => {
          return <ArticleCard post={post} />;
        })
      }
    </div>
  </div>
</section>
