---
import { getCollection } from "astro:content";
import { slugify } from "../../js/utils";
import { Icon } from "astro-icon";

// components
import ThemeSwitchBtn from "./ThemeSwitchBtn.astro";

const allPosts = await getCollection("blog");
const uniqueCategories = [
  ...new Set(
    allPosts.map((post) => {
      return post.data.category;
    })
  ),
];
---

<div>
  <div class="flex h-[70px] [&>*]:flex-1 [&>*]:h-full p-1 gap-1">
    <a href="/" class="btn btn-ghost btn-square">
      <Icon pack="mdi" name="home" height="32" />
    </a>
    <ThemeSwitchBtn />
  </div>
  <h3 class="py-1 bg-base-200">
    <span class="text-sm py-1 px-4 font-medium text-opacity-80">Category</span>
  </h3>
  <ul class="[&>*]:capitalize">
    {
      uniqueCategories.map((category) => (
        <li class="border-b text-lg border-base-200/60 font-semibold text-base-content">
          <a
            class="w-full hover:bg-base-200 block px-4 py-2"
            href={`/category/${slugify(category)}`}
          >
            {category}
          </a>
        </li>
      ))
    }
  </ul>
</div>
