---
import { getCollection } from "astro:content";
import { slugify } from "../../js/utils";

const allPosts = await getCollection("blog");
const uniqueCategories = [
  ...new Set(
    allPosts.map((post) => {
      return post.data.category;
    })
  ),
];
---

<div>
  <h3 class="py-1 bg-primary text-primary-content opacity-100">
    <span class="text-sm py-2 px-4 font-medium">Category</span>
  </h3>
  <ul class="[&>*]:capitalize">
    {
      uniqueCategories.map((category) => (
        <li class="border-b text-lg border-base-200/60 font-semibold text-base-content">
          <a
            class="w-full hover:bg-base-200 block p-4"
            href={`/category/${slugify(category)}`}
          >
            {category}
          </a>
        </li>
      ))
    }
  </ul>
</div>
